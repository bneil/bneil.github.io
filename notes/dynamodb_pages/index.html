<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Dynamo DB Pages - bneil.me</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Small blog on notes"><meta property="og:image" content><meta property="og:title" content="Dynamo DB Pages"><meta property="og:description" content="Small blog on notes"><meta property="og:type" content="article"><meta property="og:url" content="https://bneil.me/notes/dynamodb_pages/"><meta property="article:section" content="notes"><meta property="article:published_time" content="2021-05-25T10:33:49-06:00"><meta property="article:modified_time" content="2021-10-02T22:51:44-06:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Dynamo DB Pages"><meta name=twitter:description content="Small blog on notes"><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://bneil.me/css/main.2f9b5946627215dc1ae7fa5f82bfc9cfcab000329136befeea5733f21e77d68f.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://bneil.me/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css><link rel=stylesheet type=text/css href=https://bneil.me/css/update.87adedd5cefb47280a833bf9de869c6001a7967fdecb78e1157dd1c51f679a82.css></head><body><div class=content><header><div class=main><a href=https://bneil.me>bneil.me</a></div><nav><a href=/>Home</a>
<a href=/contact>Contact</a>
<a href=/resume>Resume</a>
<a href=/about>About</a>
<a href=/posts>Blog</a>
<a href=/tags/notes>Notes</a>
<a href=/now>Now</a></nav></header><main><article class=h-entry><div class=title><h1 class="title p-name">Dynamo DB Pages</h1><div class=meta>Posted on May 25, 2021</div></div><section class="body e-content"><h2 id=dynamo-code-snippet>Dynamo code snippet</h2><p>Recently got burned because we needed to do a recursive paging through dynamo</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>listOfThings</span> []<span style=color:#a6e22e>Whatever</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>store</span>.<span style=color:#a6e22e>ScanPages</span>(<span style=color:#a6e22e>input</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>page</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>dynamodb</span>.<span style=color:#a6e22e>ScanOutput</span>, <span style=color:#a6e22e>lastPage</span> <span style=color:#66d9ef>bool</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>item</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>page</span>.<span style=color:#a6e22e>Items</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>whateva</span> <span style=color:#a6e22e>Whatever</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>val</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>item</span>[<span style=color:#e6db74>&#34;jval&#34;</span>]; <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Unmarshal</span>([]byte(<span style=color:#f92672>*</span><span style=color:#a6e22e>val</span>.<span style=color:#a6e22e>S</span>), <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>whateva</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span> <span style=color:#75715e>// its like continue
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                }
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>listOfThings</span> = append(<span style=color:#a6e22e>listOfThings</span>, <span style=color:#a6e22e>whateva</span>)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> !<span style=color:#a6e22e>lastPage</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Fail</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></section><small><a class=u-url href=https://bneil.me/notes/dynamodb_pages/>https://bneil.me/notes/dynamodb_pages/</a></small><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/notes>notes</a></li><li><a href=/tags/aws>aws</a></li><li><a href=/tags/golang>golang</a></li></ul></nav></div></article></main><footer><hr><a class=soc rel=me href=https://github.com/bneil title=Github><i data-feather=github></i></a>|<a class=soc rel=me href=https://twitter.com/benneil/ title=Twitter><i data-feather=twitter></i></a>|<a class=soc rel=me href=https://www.linkedin.com/in/readyplayer1/ title=LinkedIn><i data-feather=linkedin></i></a>|<a class=soc rel=me href=mailto:ben@neil-concepts.com title=Email><i data-feather=mail></i></a>|<a class=soc rel=me href=https://coderwall.com/bneil title=Coderwall><i data-feather=code></i></a>|<a class=soc rel=me href=https://medium.com/@bneil/about title=Medium><i data-feather=book></i></a>|<a class=soc rel=me href=https://bneil.me/index.xml title=rss><i data-feather=rss></i></a>|⚡️
2022 © bneil | site was last updated: Jan 23, 2022</footer><link rel=webmention href=https://webmention.io/bneil.me/webmention><link rel=pingback href=https://webmention.io/bneil.me/xmlrpc><div class=h-card style=display:none><span class=p-name>Ben Neil</span>
<span class=p-given-name>Ben</span>
<abbr class=p-additional-name>E.</abbr>
<span class=p-family-name>Neil</span>
<span class=p-nickname>bneil</span> (IRC)
<img class=u-photo src=https://bneil.me/images/avatar.gif>
<a class=u-url href=https://bneil.me>w</a>,
<a class=u-email href=mailto:ben@neil-conceptscom>e</a><div class=p-category>programmer</div><div class=p-note>Now is tea time</div></div><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "cc4d2eca67bc471d83269a9e66e60551"}'></script>
<script>var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push(101323590)</script><script async src=//static.getclicky.com/js></script><noscript><p><img alt=Clicky width=1 height=1 src=//in.getclicky.com/101323590ns.gif></p></noscript><script>feather.replace()</script></div></body></html>