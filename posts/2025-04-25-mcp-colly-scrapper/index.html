<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>mcp-colly-scrapper - bneil.me</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Doing web scrapping for cheap"><meta property="og:image" content><meta property="og:url" content="https://bneil.me/posts/2025-04-25-mcp-colly-scrapper/"><meta property="og:site_name" content="bneil.me"><meta property="og:title" content="mcp-colly-scrapper"><meta property="og:description" content="Doing web scrapping for cheap"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-25T04:05:14+00:00"><meta property="article:modified_time" content="2025-04-24T22:26:40-06:00"><meta property="article:tag" content="Development"><meta property="article:tag" content="Ai"><meta property="article:tag" content="Mcp Server"><meta property="article:tag" content="Claude"><meta name=twitter:card content="summary"><meta name=twitter:title content="mcp-colly-scrapper"><meta name=twitter:description content="Doing web scrapping for cheap"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://bneil.me/css/main.6a0f23ea50fd34b46fee262a5a68e17d458c51a2bc99ba1ba018065de6b180c3.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://bneil.me/css/dark.f7f653818008804da30d1735284e5eb1e9c3339332869aa296658b199bea7809.css disabled></head><body><div class=content><header><div class=main><a href=https://bneil.me/>bneil.me</a></div><nav><a href=/>Home</a>
<a href=/resume>Resume</a>
<a href=/about>About</a>
<a href=/posts>Blog</a>
<a href=/tags/notes>Notes</a>
<a href=/now>Now</a>
| <span id=dark-mode-toggle onclick=toggleTheme()><svg class="feather"><use href="/feather-sprite.svg#sun"/></svg></span>
<script src=https://bneil.me/js/themetoggle.js></script></nav></header><main><article class=h-entry><div class=title><h1 class="title p-name">mcp-colly-scrapper</h1><div class=meta>Posted on Apr 25, 2025</div></div><section class="body e-content"><h1 id=building-a-web-scrapper>Building a web scrapper&mldr;</h1><p>You know what&rsquo;s fascinating about building a web scraping solution? It&rsquo;s not just about extracting data - its about abusing local resources on your laptop to crawl information and make you mcp client of choice do your bidding.</p><p>When I first started this project, I wanted to find something that would be like firecrawl but wouldn&rsquo;t cost me any money. So I chose to, lol, go with Go along with the Colly framework for my scraping needs - and that decision has paid off in spades. Colly gave me the perfect balance of power and simplicity, allowing me to focus on what really mattered: getting the data.</p><p>So without further ado, lets go look over at github.com/bneil/mcp-go-colly</p><h1 id=peeking-under-the-hood-how-my-go-web-crawler-works>Peeking Under the Hood: How My Go Web Crawler Works</h1><p>So this project is fairly simple. We&rsquo;ve got three main pieces of code here: <code>main.go</code>, <code>mcp_integration.go</code>, and <code>crawler.go</code>.</p><p><code>main.go</code> is well the main loop of our app. It’s where everything kicks off. The first thing we are doing is integrate an MCP server. This server is what allows other systems or users to actually <em>use</em> my crawler tool.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// Create MCP server
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>server</span>.<span style=color:#a6e22e>NewMCPServer</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;WebCrawlerServer&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;1.0.0&#34;</span>,
</span></span><span style=display:flex><span>) <span style=color:#75715e>//
</span></span></span></code></pre></div><p>It also creates the actual <code>crawlerTool</code> using code defined elsewhere, it tells the server <em>how</em> to handle requests coming into that tool. This involves a handler function that takes an incoming MCP request, figures out what URLs to crawl and how deep to go, calls our crawler logic, and then packages the results back up in the MCP format. Kinda like a receptionist taking a call, getting the details, passing the job to the right department, and then relaying the answer back.</p><p>Now, how does our code actually <em>talk</em> with MCP? <code>mcp_integration.go</code>, is the file about defining the language and structure needed to integrate with the MCP framework. It defines what a &ldquo;tool&rdquo; looks like in this world, including its name, description, and parameters.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// NewCrawlerTool creates a tool for web crawling...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>NewCrawlerTool</span>() <span style=color:#a6e22e>mcp</span>.<span style=color:#a6e22e>Tool</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>mcp</span>.<span style=color:#a6e22e>NewTool</span>(<span style=color:#e6db74>&#34;web_crawler&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>mcp</span>.<span style=color:#a6e22e>WithDescription</span>(<span style=color:#e6db74>&#34;Crawl and extract information from websites&#34;</span>),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>mcp</span>.<span style=color:#a6e22e>WithString</span>(<span style=color:#e6db74>&#34;urls&#34;</span>, <span style=color:#a6e22e>mcp</span>.<span style=color:#a6e22e>Required</span>(), <span style=color:#a6e22e>mcp</span>.<span style=color:#a6e22e>Description</span>(<span style=color:#e6db74>&#34;List of URLs to crawl&#34;</span>)),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>mcp</span>.<span style=color:#a6e22e>WithNumber</span>(<span style=color:#e6db74>&#34;max_depth&#34;</span>, <span style=color:#a6e22e>mcp</span>.<span style=color:#a6e22e>Description</span>(<span style=color:#e6db74>&#34;Maximum crawl depth&#34;</span>)),
</span></span><span style=display:flex><span>	) <span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>This file essentially provides the blueprint for how the outside world interacts with our crawler via MCP. It also includes helper functions, like one to extract domain names from URLs, which is handy.</p><p>The <code>crawler.go</code> defines the <code>MCPCrawler</code> itself. It leverages a library called <code>colly</code> to do the heavy lifting of fetching and parsing web pages.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// MCPCrawler manages web crawling with MCP integration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>MCPCrawler</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>collector</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>colly</span>.<span style=color:#a6e22e>Collector</span> <span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>config</span>    <span style=color:#f92672>*</span><span style=color:#a6e22e>CrawlerConfig</span>   <span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>results</span>   []<span style=color:#a6e22e>CrawlResult</span>    <span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>mutex</span>     <span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>Mutex</span>       <span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>When you create a new crawler using <code>NewMCPCrawler</code>, you can pass in options like the maximum crawl depth (<code>MaxDepth</code>) and which domains it&rsquo;s allowed to visit (<code>AllowedDomains</code>). This keeps your crawler from wandering off into the entire internet..</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// Handle successful page visits
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>mc</span>.<span style=color:#a6e22e>collector</span>.<span style=color:#a6e22e>OnHTML</span>(<span style=color:#e6db74>&#34;html&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>e</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>colly</span>.<span style=color:#a6e22e>HTMLElement</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>result</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>CrawlResult</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>URL</span>:     <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Request</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>String</span>(),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Title</span>:   <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>DOM</span>.<span style=color:#a6e22e>Find</span>(<span style=color:#e6db74>&#34;title&#34;</span>).<span style=color:#a6e22e>Text</span>(),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Content</span>: <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Text</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ... save result ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}) <span style=color:#75715e>//
</span></span></span></code></pre></div><p>This also handles crawling multiple URLs concurrently using goroutines and a <code>sync.WaitGroup</code> to manage them. Pretty solid for speeding things up!</p><h3 id=conclusion>Conclusion</h3><ol><li><code>main.go</code> sets up the server and handles incoming requests.</li><li>It uses definitions from <code>mcp_integration.go</code> to understand the request and structure the response according to MCP rules.</li><li>It calls the actual crawling logic defined in <code>crawler.go</code>, passing the URLs and depth.</li><li><code>crawler.go</code> uses <code>colly</code> to fetch the data, handling configuration, success cases, and errors.</li><li>The results flow back up, get formatted, and sent out by the server.</li></ol><p>Hope you enjoy the crawling! Also been listening to Dungeon Crawler Carl.. So idk, this seemed like a fun project.</p></section><hr>### comments
<script src=https://utteranc.es/client.js repo=bneil/bneil.github.io issue-term=pathname theme=preferred-color-scheme crossorigin=anonymous async></script><hr>### webmention section<div class=manual-webmention><p>Have you written a <a href=https://indieweb.org/responses>response</a> to this post? Put the url here:</p><form id=manual-webmention action=https://webmention.io/bneil.me/webmention method=post><input type=url name=source>
<input type=hidden name=target value=https://bneil.me/posts/2025-04-25-mcp-colly-scrapper/>
<input type=submit name=submit value=Comment></form></form></div><br><div></div><small>permalink: <a class=u-url href=https://bneil.me/posts/2025-04-25-mcp-colly-scrapper/>https://bneil.me/posts/2025-04-25-mcp-colly-scrapper/</a></small><div class=post-tags><nav class="nav tags"><ul class=tags><li>&nbsp;<a href=/tags/development>development</a></li><li>&nbsp;<a href=/tags/ai>ai</a></li><li>&nbsp;<a href=/tags/mcp-server>mcp server</a></li><li>&nbsp;<a href=/tags/claude>claude</a></li></ul></nav></div></article></main><hr class=halloween-hr style=width:100%><footer style=border-top:0><a class=soc href=https://github.com/bneil rel=me title=Github><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#github"/></svg></a><a class=border></a><a class=soc href=https://indieweb.social/@bneil rel=me title="IndieWeb Social"><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#user-check"/></svg></a><a class=border></a><a class=soc href=https://www.linkedin.com/in/readyplayer1/ rel=me title=LinkedIn><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#linkedin"/></svg></a><a class=border></a><a class=soc href=mailto:ben@neil-concepts.com rel=me title=Email><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#mail"/></svg></a><a class=border></a><a class=soc href=https://coderwall.com/bneil rel=me title=Coderwall><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#code"/></svg></a><a class=border></a><a class=soc href=https://medium.com/@bneil/about rel=me title=Medium><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#book"/></svg></a><a class=border></a><a class=soc href=https://bneil.me/index.xml rel=me title=rss><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#rss"/></svg></a><a class=border></a>⚡️
2025 © bneil | site was last updated: Apr 24, 2025</footer><link rel=webmention href=https://webmention.io/bneil.me/webmention><link rel=pingback href=https://webmention.io/bneil.me/xmlrpc><div class=h-card style=display:none><span class=p-name>Ben Neil</span>
<span class=p-given-name>Ben</span>
<abbr class=p-additional-name>E.</abbr>
<span class=p-family-name>Neil</span>
<span class=p-nickname>bneil</span> (IRC)
<img class=u-photo src=https://bneil.me/images/avatar.gif>
<a class=u-url href=acct:bneil@bneil.me></a><a class=u-email href=mailto:ben@neil-concepts.com>e</a><div class=p-category>programmer</div><div class=p-note>Automation Mechanic</div><a class="u-url u-uid" href=https://bneil.me/></a></div><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "cc4d2eca67bc471d83269a9e66e60551"}'></script><script>var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push(101323590)</script><script async src=//static.getclicky.com/js></script><noscript><p><img alt=Clicky width=1 height=1 src=//in.getclicky.com/101323590ns.gif></p></noscript><script async src=https://analytics.umami.is/script.js data-website-id=438d75f5-c8b9-4507-b617-9c4e1f8cdbe1></script><script>feather.replace()</script><div class=stars><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div></div></div></body></html>