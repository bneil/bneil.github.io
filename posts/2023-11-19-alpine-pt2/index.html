<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>alpine-pt2 - bneil.me</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Just more work on my simple alpine project"><meta property="og:image" content><meta property="og:url" content="https://bneil.me/posts/2023-11-19-alpine-pt2/"><meta property="og:site_name" content="bneil.me"><meta property="og:title" content="alpine-pt2"><meta property="og:description" content="Just more work on my simple alpine project"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-19T22:03:02+00:00"><meta property="article:modified_time" content="2023-11-19T15:41:37-07:00"><meta property="article:tag" content="NaBloPoMo2023"><meta name=twitter:card content="summary"><meta name=twitter:title content="alpine-pt2"><meta name=twitter:description content="Just more work on my simple alpine project"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://bneil.me/css/main.6a0f23ea50fd34b46fee262a5a68e17d458c51a2bc99ba1ba018065de6b180c3.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://bneil.me/css/dark.f7f653818008804da30d1735284e5eb1e9c3339332869aa296658b199bea7809.css disabled></head><body><div class=content><header><div class=main><a href=https://bneil.me/>bneil.me</a></div><nav><a href=/>Home</a>
<a href=/resume>Resume</a>
<a href=/about>About</a>
<a href=/posts>Blog</a>
<a href=/tags/notes>Notes</a>
<a href=/now>Now</a>
| <span id=dark-mode-toggle onclick=toggleTheme()><svg class="feather"><use href="https://unpkg.com/feather-icons@4.29.2/dist/feather-sprite.svg#sun"/></svg></span>
<script src=https://bneil.me/js/themetoggle.js></script></nav></header><main><article class=h-entry><div class=title><h1 class="title p-name">alpine-pt2</h1><div class=meta>Posted on Nov 19, 2023</div></div><section class="body e-content"><p>Continuing on, lets go ahead and add <a href=https://github.com/cosmtrek/air>air</a> because doing reloads is lame. Also going to add a makefile because I feel like those two go together like beer and skittles.</p><p>First lets make a bin directory</p><p><code>mkdir bin</code></p><p>Then lets add the <code>.air.toml</code> file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>root = &#34;.&#34;
</span></span><span style=display:flex><span>testdata_dir = &#34;testdata&#34;
</span></span><span style=display:flex><span>tmp_dir = &#34;tmp&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[build]
</span></span><span style=display:flex><span>  bin = &#34;./bin/app&#34;
</span></span><span style=display:flex><span>  cmd = &#34;go build -o ./bin/app main.go&#34;
</span></span><span style=display:flex><span>  delay = 1000
</span></span><span style=display:flex><span>  exclude_dir = []
</span></span><span style=display:flex><span>  exclude_file = []
</span></span><span style=display:flex><span>  exclude_regex = [&#34;_test.go&#34;]
</span></span><span style=display:flex><span>  exclude_unchanged = false
</span></span><span style=display:flex><span>  follow_symlink = false
</span></span><span style=display:flex><span>  full_bin = &#34;./bin/app&#34;
</span></span><span style=display:flex><span>  include_dir = []
</span></span><span style=display:flex><span>  include_ext = [&#34;go&#34;, &#34;tpl&#34;, &#34;tmpl&#34;, &#34;html&#34;,&#34;gohtml&#34;,&#34;css&#34;]
</span></span><span style=display:flex><span>  kill_delay = &#34;0s&#34;
</span></span><span style=display:flex><span>  log = &#34;build-errors.log&#34;
</span></span><span style=display:flex><span>  send_interrupt = false
</span></span><span style=display:flex><span>  stop_on_error = true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[color]
</span></span><span style=display:flex><span>  app = &#34;&#34;
</span></span><span style=display:flex><span>  build = &#34;yellow&#34;
</span></span><span style=display:flex><span>  main = &#34;magenta&#34;
</span></span><span style=display:flex><span>  runner = &#34;green&#34;
</span></span><span style=display:flex><span>  watcher = &#34;cyan&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[log]
</span></span><span style=display:flex><span>  time = true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[misc]
</span></span><span style=display:flex><span>  clean_on_exit = false
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[screen]
</span></span><span style=display:flex><span>  clear_on_rebuild = false
</span></span></code></pre></div><p>Now we can add in a simple Makefile, ive used <a href=https://github.com/go-task/task>Taskfile</a> as an alternative, but really didn&rsquo;t get much out of it other then having everything in golang. Which is great but not really a requirement for this project. So here is the Makfile magic:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>GOCMD = go
</span></span><span style=display:flex><span>GOBUILD = $(GOCMD) build
</span></span><span style=display:flex><span>GOCLEAN = $(GOCMD) clean
</span></span><span style=display:flex><span>GOTEST = $(GOCMD) test
</span></span><span style=display:flex><span>GOGET = $(GOCMD) get
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MAIN = main.go
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>BINARY_NAME = ./bin/app
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>watch:
</span></span><span style=display:flex><span>	air
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>build:
</span></span><span style=display:flex><span>	$(GOBUILD) -o $(BINARY_NAME) $(MAIN)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>run:
</span></span><span style=display:flex><span>	$(GOBUILD) -o $(BINARY_NAME) $(MAIN)
</span></span><span style=display:flex><span>	./$(BINARY_NAME)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>test:
</span></span><span style=display:flex><span>	$(GOTEST) -v ./...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>get:
</span></span><span style=display:flex><span>	$(GOGET) ./...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>clean:
</span></span><span style=display:flex><span>	$(GOCLEAN)
</span></span><span style=display:flex><span>	rm -f $(BINARY_NAME)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>all: build run
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.PHONY: build run test get clean watch all
</span></span></code></pre></div><p>One question I always had back in the day with Makefiles was that .PHONY target, to put it simply when you mark a target as .PHONY, it&rsquo;s like telling Make that this target doesn&rsquo;t represent a real file or thing to build; it represents a task to be performed. So its always good to have your tasks in there.</p><p>Day 2 complete</p></section><hr>### comments
<script src=https://utteranc.es/client.js repo=bneil/bneil.github.io issue-term=pathname theme=preferred-color-scheme crossorigin=anonymous async></script><hr>### webmention section<div class=manual-webmention><p>Have you written a <a href=https://indieweb.org/responses>response</a> to this post? Put the url here:</p><form id=manual-webmention action=https://webmention.io/bneil.me/webmention method=post><input type=url name=source>
<input type=hidden name=target value=https://bneil.me/posts/2023-11-19-alpine-pt2/>
<input type=submit name=submit value=Comment></form></form></div><br><div></div><small>permalink: <a class=u-url href=https://bneil.me/posts/2023-11-19-alpine-pt2/>https://bneil.me/posts/2023-11-19-alpine-pt2/</a></small><div class=post-tags><nav class="nav tags"><ul class=tags><li>&nbsp;<a href=/tags/nablopomo2023>NaBloPoMo2023</a></li></ul></nav></div></article></main><hr class=halloween-hr style=width:100%><footer style=border-top:0><a class=soc rel=me href=https://github.com/bneil title=Github><i data-feather=github></i></a>|<a class=soc rel=me href=https://indieweb.social/@bneil title="IndieWeb Social"><i data-feather=user-check></i></a>|<a class=soc rel=me href=https://www.linkedin.com/in/readyplayer1/ title=LinkedIn><i data-feather=linkedin></i></a>|<a class=soc rel=me href=mailto:ben@neil-concepts.com title=Email><i data-feather=mail></i></a>|<a class=soc rel=me href=https://coderwall.com/bneil title=Coderwall><i data-feather=code></i></a>|<a class=soc rel=me href=https://medium.com/@bneil/about title=Medium><i data-feather=book></i></a>|<a class=soc rel=me href=https://bneil.me/index.xml title=rss><i data-feather=rss></i></a>|⚡️
2025 © bneil | site was last updated: Mar 14, 2025</footer><link rel=webmention href=https://webmention.io/bneil.me/webmention><link rel=pingback href=https://webmention.io/bneil.me/xmlrpc><div class=h-card style=display:none><span class=p-name>Ben Neil</span>
<span class=p-given-name>Ben</span>
<abbr class=p-additional-name>E.</abbr>
<span class=p-family-name>Neil</span>
<span class=p-nickname>bneil</span> (IRC)
<img class=u-photo src=https://bneil.me/images/avatar.gif>
<a class=u-url href=acct:bneil@bneil.me></a><a class=u-email href=mailto:ben@neil-concepts.com>e</a><div class=p-category>programmer</div><div class=p-note>Automation Mechanic</div><a class="u-url u-uid" href=https://bneil.me/></a></div><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "cc4d2eca67bc471d83269a9e66e60551"}'></script><script>var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push(101323590)</script><script async src=//static.getclicky.com/js></script><noscript><p><img alt=Clicky width=1 height=1 src=//in.getclicky.com/101323590ns.gif></p></noscript><script async src=https://analytics.umami.is/script.js data-website-id=438d75f5-c8b9-4507-b617-9c4e1f8cdbe1></script><script>feather.replace()</script><div class=stars><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div><div class=star></div></div></div></body></html>