<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>aws on Benjamin Neil</title><link>/tags/aws/</link><description>Recent content in aws on Benjamin Neil</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Tue, 01 Jun 2021 17:03:50 -0600</lastBuildDate><atom:link href="/tags/aws/index.xml" rel="self" type="application/rss+xml"/><item><title>Connecting/Migrations in RDS</title><link>/posts/note_connecting_to_rds/</link><pubDate>Tue, 01 Jun 2021 17:03:50 -0600</pubDate><guid>/posts/note_connecting_to_rds/</guid><description>Goose Since goose uses pq under the hood, to hit remote urls
goose postgres &amp;#34;user=postgres password=${PROD_PGPASS} dbname=test sslmode=disable host=database.rds.amazonaws.com&amp;#34; status PSQL / RDS I didnt have a default database created, so I needed to psql into it - summoning psql via docker container
docker run -it --rm jbergknoff/postgresql-client postgresql://postgres:${PROD_PGPASS}@database.rds.amazonaws.com:5432</description></item><item><title>Note taking apps</title><link>/posts/2021-05-28_note-taking-apps/</link><pubDate>Fri, 28 May 2021 18:13:24 -0600</pubDate><guid>/posts/2021-05-28_note-taking-apps/</guid><description>Obsidian Currently Using
Notes/Second Brain obsidian.md -&amp;gt; sourcehut -&amp;gt; all mobile devices</description></item><item><title>Audit Service - RDS</title><link>/posts/2021-05-28_rds-audit-service/</link><pubDate>Fri, 28 May 2021 11:39:43 -0600</pubDate><guid>/posts/2021-05-28_rds-audit-service/</guid><description>Audit Service or Round 2 Fight Description When I started to think more critically about how interactions would work inside dynamodb for auditing I quickly learned about pain. Lots and lots of pain. Including the fact id probably end up having to use dynamodb streams and couple that with elasticsearch. So im not going to even entertain that idea and am going down the ol trusty sql route.
Creating the database Im still on an older version of terraform, so public shamming for being on 0.</description></item><item><title>Audit Service - Dynamodb</title><link>/posts/audit-dynamodb/</link><pubDate>Wed, 26 May 2021 11:13:53 -0600</pubDate><guid>/posts/audit-dynamodb/</guid><description>Audit Service Description Decided that I wanted an audit db and service to help keep track of user behaviors. Since I already have some in Redis, and some in Postgres I thought this might be a useful exercise. The main thing id like to accomplish with this code is going to be a way to track events and break them down by week/month/year per user and per company.
Im having some self debate about creating tables for the tallies or if I should just be creating them on the fly using a query.</description></item><item><title>Dynamo DB Pages</title><link>/posts/dynamodb_pages/</link><pubDate>Tue, 25 May 2021 10:33:49 -0600</pubDate><guid>/posts/dynamodb_pages/</guid><description>Dynamo code snippet Recently got burned because we needed to do a recursive paging through dynamo
var listOfThings []Whatever err := store.ScanPages(input, func (page *dynamodb.ScanOutput, lastPage bool) bool { for _, item := range page.Items { var whateva Whatever if val, ok := item[&amp;#34;jval&amp;#34;]; ok { err := json.Unmarshal([]byte(*val.S), &amp;amp;whateva) if err != nil { return true // its like continue } listOfThings = append(listOfThings, whateva) } } return !</description></item><item><title>Using MFA with AWS CLI</title><link>/posts/2021-05-06-mfa-aws/</link><pubDate>Thu, 06 May 2021 12:24:40 -0600</pubDate><guid>/posts/2021-05-06-mfa-aws/</guid><description>MFA on AWS Cli Description Just writing down the steps ive been manually taken for updating my credentials to use ecr in aws from the cli.
Check authy on phone and write down code Check arn from aws and write that down Issue this command aws sts get-session-token --serial-number &amp;lt;arn here&amp;gt; --token-code &amp;lt;authy code&amp;gt; Take those values and plop the into ~/.aws/credentials Ensure the profile is [mfa] Convert the json to the toml keys &amp;ldquo;SecretAccessKey&amp;rdquo;: aws_secret_access_key &amp;ldquo;SessionToken&amp;rdquo;: aws_session_token &amp;ldquo;AccessKeyId&amp;rdquo;: aws_access_key_id Issue the command aws ecr get-login --profile mfa ecr above can be replaced with any service</description></item><item><title>Migrating to Dynamo</title><link>/posts/2021-04-20-dynamo_struct/</link><pubDate>Tue, 20 Apr 2021 10:15:26 -0600</pubDate><guid>/posts/2021-04-20-dynamo_struct/</guid><description>Another store getting migrated Today&amp;rsquo;s pivotal tasks are all related towards moving things away from redis and into dynamo. So far ive gotten the underpinnings done by creating a dynamo store
The main struct looks like this
type DynamoStore struct { tableName string primaryKey string store *dynamodb.DynamoDB } The funny thing is that im basically treating dynamo in the same way I was treating redis. Which is as primarily a key value store.</description></item></channel></rss>