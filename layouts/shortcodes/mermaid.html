<div class="mermaid">
    {{ .Inner | safeHTML }}
</div>

{{ if le (.Page.Scratch.Get "mermaidInserted") 0 }}

{{ .Page.Scratch.Add "mermaidInserted" 1 }}

<script type="application/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.3.0/mermaid.min.js" defer></script>
<script type="module">
    mermaid.initialize({});
</script>
<style>
svg {
  max-height: 100%;
}
</style>

{{ end }}
